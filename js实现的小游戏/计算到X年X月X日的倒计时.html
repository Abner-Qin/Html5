<html>
	<head>
		<title></title>
		<meta http-equiv="content-type" content="text/html;charset=gbk">
	</head>
	<body onload="" background="1.jpg">
		<form name="form">
			<center>
			<table border="4" width="40%" height="200" bordercolor="#6633cc">
				<caption><font face="黑体" size="5">计算到X年X月X日的倒计时</font></caption>
			<tr>
				<th colspan="3"><input type="text" name="ru" value="如：距离国庆节还有" onfocus="em()" onblur="setru()"></th>
			</tr>
			<tr>
				<td><input type="text" name="year" value="请输入：" onfocus="clearyear()" onblur="reyear()">年</td>
				<td><input type="text" name="month" value="请输入：" onfocus="clearmonth()" onblur="remonth()">月</td>
				<td><input type="text" name="date" value="请输入：" onfocus="cleardate()" onblur="redate()">日</td>
			</tr>
			<tr align="center" valign="middle">
				<td colspan="3"><input type="text" name="long" value="如：距离国庆节还有:" onfocus=""><input type="text" name="day" size="3" value="">天<input type="text" name="hours" size="2" value="">小时<input type="text" name="minutes" size="2" value="">分<input type="text" name="seconds" size="8" value="">秒</td>
			</tr>
			<tr>
				<th colspan="3"><input type="button" value="开始" onclick="aa()">&nbsp;&nbsp;<input type="button" value="清空" onclick = "cleart()"></th>
			</table>
			</center>
		</form>
		<script>
		function cleart(){
			clearTimeout(n);
			document.form.day.value = "";
			document.form.hours.value = "";
			document.form.minutes.value = "";
			document.form.seconds.value = "";

		}
		 function aa()
		 {	
				var y=parseInt(document.form.year.value);
				var m=parseInt(document.form.month.value)-1;
				var d=parseInt(document.form.date.value);
				n=0;
				var shiyi=new Date(y,m,d);
				var now=new Date();
				var cha=shiyi.getTime()-now.getTime()
				var tian=Math.floor(cha/1000/60/60/24);
				var shi=Math.floor((cha/1000-tian*24*60*60)/60/60);
				var fen=Math.floor((cha/1000-tian*24*60*60-shi*60*60)/60);
				var miao=Math.floor(cha/1000-tian*24*60*60-shi*60*60-fen*60);
				var jie="您设置的时间已到！";
				if(miao==-1)
				{
					fen--;
					miao=59;
					
				}
				if(miao<10) document.form.seconds.value="0"+miao;
				else document.form.seconds.value=miao;
				if(fen==-1)
				{
					shi--;
					fen=59;
					
				}
				if(fen<10) document.form.minutes.value="0"+fen;
				else document.form.minutes.value=fen;
				if(shi==-1)
				{
					tian--;
					shi=23;
					
				}
				if(shi<10) document.form.hours.value="0"+shi;
				else document.form.hours.value=shi;
				if(tian<10) document.form.day.value="00"+tian;
				else if(tian<100)document.form.day.value="0"+tian;
				else document.form.day.value=tian;
				miao--;				
				if(tian==0&&fen==0&&shi==0&&miao==0) {
				clearTimeout(n);
				alert(jie);
				}
				else n=setTimeout("aa()",1000);
				
		}
		function reyear()
		{
			var y=document.form.year.value;
			var re=/^[1-9]{1}\d{3}$/g;
			if(!re.test(y)) alert("请输入正确的年份！")
		}
		function remonth()
		{
			var m=document.form.month.value;
			var re=/^([1-9]{1}|(1[0-2]{1}))$/g;
			if(!re.test(m)) alert("请输入正确的月份！");
		}
		function redate()
		{
			var d=document.form.date.value;
			var re=/^([1-9]{1}|((1|2){1}\d{1})|(3[01]{1}))$/g;
			if(!re.test(d)) alert("请输入正确的日！");
		}
		function em()
		{
			document.form.ru.value="";
			document.form.long.value="";
		}
		function clearyear()
		{
			document.form.year.value="";
		}
		function clearmonth()
		{
			document.form.month.value="";
		}
		function cleardate()
		{
			document.form.date.value="";
		}
		function setru()
		{
			document.form.long.value=document.form.ru.value;
		}
		</script>
	</body>
</html>